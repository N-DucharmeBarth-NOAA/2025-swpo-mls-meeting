<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.41">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Respository instructions – 2025 SWPO striped marlin assessment meeting</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-48ffa3e5b9d089919c6712c39e5b00f2.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-6a828ca2fb837163c7380193ffea110b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <a class="flex-grow-1 no-decor" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
          <h1 class="quarto-secondary-nav-title">Respository instructions</h1>
        </a>     
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">2025 SWPO striped marlin assessment meeting</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/N-DucharmeBarth-NOAA/2025-swpo-mls-meeting" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">WCPFC-SC report</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assets/noaa-spc-model-meeting-report.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">HTML</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assets/noaa-spc-model-meeting-report.pdf" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PDF</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assets/instructions.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Repository instructions</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Support</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://github.com/N-DucharmeBarth-NOAA/2025-swpo-mls-meeting/issues/new/choose" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Submit an issue</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="-1">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link active" data-scroll-target="#getting-started">Getting Started</a>
  <ul class="collapse">
  <li><a href="#running-the-models-locally" id="toc-running-the-models-locally" class="nav-link" data-scroll-target="#running-the-models-locally">Running the Models Locally</a>
  <ul class="collapse">
  <li><a href="#using-base-r" id="toc-using-base-r" class="nav-link" data-scroll-target="#using-base-r">Using Base R</a></li>
  <li><a href="#using-rstudio" id="toc-using-rstudio" class="nav-link" data-scroll-target="#using-rstudio">Using RStudio</a></li>
  <li><a href="#using-visual-studio-code" id="toc-using-visual-studio-code" class="nav-link" data-scroll-target="#using-visual-studio-code">Using Visual Studio Code</a></li>
  </ul></li>
  <li><a href="#running-the-models-with-github-codespaces" id="toc-running-the-models-with-github-codespaces" class="nav-link" data-scroll-target="#running-the-models-with-github-codespaces">Running the Models with GitHub Codespaces</a></li>
  </ul></li>
  <li><a href="#project-structure" id="toc-project-structure" class="nav-link" data-scroll-target="#project-structure">Project Structure</a>
  <ul class="collapse">
  <li><a href="#model-workflow-and-scripts" id="toc-model-workflow-and-scripts" class="nav-link" data-scroll-target="#model-workflow-and-scripts">Model Workflow and Scripts</a></li>
  <li><a href="#model-development-scripts" id="toc-model-development-scripts" class="nav-link" data-scroll-target="#model-development-scripts">Model Development Scripts</a></li>
  <li><a href="#visualization-and-analysis" id="toc-visualization-and-analysis" class="nav-link" data-scroll-target="#visualization-and-analysis">Visualization and Analysis</a></li>
  </ul></li>
  <li><a href="#helper-functions" id="toc-helper-functions" class="nav-link" data-scroll-target="#helper-functions">Helper Functions</a>
  <ul class="collapse">
  <li><a href="#model-management" id="toc-model-management" class="nav-link" data-scroll-target="#model-management">Model Management</a></li>
  <li><a href="#data-processing" id="toc-data-processing" class="nav-link" data-scroll-target="#data-processing">Data Processing</a></li>
  <li><a href="#reporting-and-visualization" id="toc-reporting-and-visualization" class="nav-link" data-scroll-target="#reporting-and-visualization">Reporting and Visualization</a></li>
  </ul></li>
  <li><a href="#usage-examples" id="toc-usage-examples" class="nav-link" data-scroll-target="#usage-examples">Usage Examples</a>
  <ul class="collapse">
  <li><a href="#generating-html-dashboard-for-a-model" id="toc-generating-html-dashboard-for-a-model" class="nav-link" data-scroll-target="#generating-html-dashboard-for-a-model">Generating HTML Dashboard for a Model</a></li>
  <li><a href="#comparing-models-with-time-series-plots" id="toc-comparing-models-with-time-series-plots" class="nav-link" data-scroll-target="#comparing-models-with-time-series-plots">Comparing Models with Time Series Plots</a></li>
  <li><a href="#using-the-interactive-shiny-app" id="toc-using-the-interactive-shiny-app" class="nav-link" data-scroll-target="#using-the-interactive-shiny-app">Using the Interactive Shiny App</a></li>
  <li><a href="#creating-a-new-model-from-an-existing-one" id="toc-creating-a-new-model-from-an-existing-one" class="nav-link" data-scroll-target="#creating-a-new-model-from-an-existing-one">Creating a New Model from an Existing One</a></li>
  </ul></li>
  <li><a href="#license" id="toc-license" class="nav-link" data-scroll-target="#license">License</a></li>
  <li><a href="#disclaimer" id="toc-disclaimer" class="nav-link" data-scroll-target="#disclaimer">Disclaimer</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/N-DucharmeBarth-NOAA/2025-swpo-mls-meeting/blob/main/assets/instructions.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/N-DucharmeBarth-NOAA/2025-swpo-mls-meeting/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Respository instructions</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="getting-started" class="level1">
<h1>Getting Started</h1>
<p>This project uses <code>renv</code> for package management to ensure reproducibility across environments. The repository is also configured to work with GitHub Codespaces for cloud-based development.</p>
<section id="running-the-models-locally" class="level2">
<h2 class="anchored" data-anchor-id="running-the-models-locally">Running the Models Locally</h2>
<p>First, <a href="https://docs.github.com/en/repositories/creating-and-managing-repositories/cloning-a-repository">clone</a> this repository to your local machine.</p>
<section id="using-base-r" class="level3">
<h3 class="anchored" data-anchor-id="using-base-r">Using Base R</h3>
<ol type="1">
<li><p>Open an R terminal (recommended <a href="https://cloud.r-project.org/">version 4.4.0</a> with RTools 4.4 installed)</p></li>
<li><p>Set your working directory to the cloned repository:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"path/to/repository/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Source the <code>.Rprofile</code> file to bootstrap <code>renv</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">".Rprofile"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>If <code>renv</code> doesn’t bootstrap automatically, run:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">restore</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Follow the prompts to install all required packages (including <code>data.table</code>, <code>magrittr</code>, <code>ggplot2</code>, <code>r4ss</code>, <code>FLR4MFCL</code>, and other dependencies)</p></li>
</ol>
</section>
<section id="using-rstudio" class="level3">
<h3 class="anchored" data-anchor-id="using-rstudio">Using RStudio</h3>
<ol type="1">
<li><p>Open the repository as an <a href="https://bookdown.org/ndphillips/YaRrr/projects-in-rstudio.html">RStudio Project</a></p></li>
<li><p>RStudio should automatically detect the <code>renv</code> configuration and prompt for package installation</p></li>
<li><p>If <code>renv</code> doesn’t bootstrap automatically, run:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">restore</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</section>
<section id="using-visual-studio-code" class="level3">
<h3 class="anchored" data-anchor-id="using-visual-studio-code">Using Visual Studio Code</h3>
<ol type="1">
<li><p>Configure VS Code to work with R using the <a href="https://github.com/REditorSupport/vscode-R">R extension</a></p></li>
<li><p>Follow the specific <a href="https://github.com/REditorSupport/vscode-R/wiki/Working-with-renv-enabled-projects">configuration steps for renv projects</a></p></li>
<li><p>Open the repository folder in VS Code</p></li>
<li><p>Open an R terminal, which should prompt <code>renv</code> to bootstrap</p></li>
<li><p>If <code>renv</code> doesn’t bootstrap automatically, run:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">restore</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</section>
</section>
<section id="running-the-models-with-github-codespaces" class="level2">
<h2 class="anchored" data-anchor-id="running-the-models-with-github-codespaces">Running the Models with GitHub Codespaces</h2>
<p>GitHub Codespaces provides a cloud-based development environment with all dependencies pre-configured:</p>
<ol type="1">
<li><p><a href="https://docs.github.com/en/codespaces/developing-in-a-codespace/creating-a-codespace-for-a-repository#creating-a-codespace-for-a-repository">Open a Codespace</a> for this repository using the default options</p></li>
<li><p>Initial Codespace creation may take 15-20 minutes to complete</p></li>
<li><p>Once ready, open an R terminal in the Codespace</p></li>
<li><p>The <code>renv</code> package should bootstrap automatically</p></li>
<li><p>If <code>renv</code> doesn’t bootstrap automatically, run:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">restore</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</section>
</section>
<section id="project-structure" class="level1">
<h1>Project Structure</h1>
<p>The project is organized with the following directory structure:</p>
<pre><code>project/
├── assets/
│   └── static/         # Output plots and figures
├── code/               # Main workflow scripts
│   └── helper-fns/     # Helper functions sourced by main scripts
├── data/               # Input data files
├── executables/
│   └── stock-synthesis/ # Stock Synthesis executables
├── html-dashboard/     # HTML viewer output
├── models/
│   ├── mfcl/           # MFCL model files
│   └── stock-synthesis/ # Stock Synthesis model files
└── shiny/              # Shiny app for interactive model exploration</code></pre>
<ul>
<li><strong><code>assets/static/</code></strong>: Contains all generated plots for reports and presentations</li>
<li><strong><code>code/</code></strong>: Houses the main workflow scripts for model development and visualization</li>
<li><strong><code>code/helper-fns/</code></strong>: Contains utility functions that support the main workflow</li>
<li><strong><code>data/</code></strong>: Stores input data files including catch histories, size compositions, and age data</li>
<li><strong><code>executables/</code></strong>: Contains different versions of Stock Synthesis executable files</li>
<li><strong><code>html-dashboard/</code></strong>: Destination for generated HTML viewer files</li>
<li><strong><code>models/</code></strong>: Stores input/output files for both MFCL and Stock Synthesis models</li>
<li><strong><code>shiny/</code></strong>: Contains files for the interactive Shiny application</li>
</ul>
<section id="model-workflow-and-scripts" class="level2">
<h2 class="anchored" data-anchor-id="model-workflow-and-scripts">Model Workflow and Scripts</h2>
<p>The main workflow scripts are located in the <code>code/</code> directory. These scripts progress from initial model conversion through refinement stages to the final model implementation.</p>
</section>
<section id="model-development-scripts" class="level2">
<h2 class="anchored" data-anchor-id="model-development-scripts">Model Development Scripts</h2>
<ul>
<li><p><strong><code>01-make-baseline-stock-synthesis-model.r</code></strong>: Creates the baseline Stock Synthesis model from MFCL model version “1979_20p3”.</p>
<ul>
<li>Converts from MFCL to annual model with length-based selectivity</li>
<li>Maintains single sex configuration and fixes initial F</li>
<li>Preserves seasonal index for Q4</li>
</ul></li>
<li><p><strong><code>02-mls-ss3-1979.r</code></strong>: Updates the initial MLS model with:</p>
<ul>
<li>Resolves NZ recreational selectivity by sharing terminal bins</li>
<li>Adds tail compression</li>
<li>Adds extra observation standard error for CPUE index</li>
<li>Estimates end logit parameter for selectivity</li>
<li>Downweights size composition data</li>
</ul></li>
<li><p><strong><code>03-chg-selex-1979.r</code></strong>: Adjusts selectivity parameters for specific fleets (LL 2, AU REC 9, Index 15)</p></li>
<li><p><strong><code>04-start-1952.r</code></strong>: Extends the model period back to 1952</p>
<ul>
<li>Adds historical catch data</li>
<li>Includes NZ recreational weight composition data</li>
<li>Changes parameterization of extra index observation error</li>
</ul></li>
<li><p><strong><code>06-exclude-more-comp.r</code></strong>: Excludes additional composition data:</p>
<ul>
<li>Drops index (15) length composition</li>
<li>Drops fishery 2 length composition</li>
<li>Drops fishery 2 weight composition for 1979</li>
</ul></li>
<li><p><strong><code>07-catch-uncertainty.r</code></strong>: Incorporates catch uncertainty for pre-1979 Fleet 2</p></li>
<li><p><strong><code>12-CAAL-old-growth-SD.r</code></strong>: Implements conditional age-at-length (CAAL) model</p>
<ul>
<li>Incorporates age data</li>
<li>Adds ageing error matrix</li>
<li>Enables estimation of growth parameters L1, L2, K</li>
</ul></li>
</ul>
</section>
<section id="visualization-and-analysis" class="level2">
<h2 class="anchored" data-anchor-id="visualization-and-analysis">Visualization and Analysis</h2>
<ul>
<li><p><strong><code>00-html-viewer.r</code></strong>: Generates HTML files for viewing individual model results, creating interactive dashboards that display model fits, parameter estimates, and diagnostic plots.</p></li>
<li><p><strong><code>00-pres-plots.r</code></strong>: Creates plots for presentation, focusing on model comparison time series. Generates sequential comparisons of depletion estimates across different model configurations to illustrate how each modeling decision affects population trajectory estimates.</p></li>
<li><p><strong><code>00-report-plots.r</code></strong>: Produces comprehensive plots for report documents, including:</p>
<ul>
<li>Time series comparisons (SSB, depletion, recruitment)</li>
<li>Selectivity curve visualization by fleet</li>
<li>Index fit diagnostics with variance adjustments</li>
<li>Length and weight composition fits across time periods and fleets</li>
<li>Biological parameter visualization (growth, maturity)</li>
<li>Catch history and model fits to observed catch</li>
</ul></li>
<li><p><strong><code>00-shiny-gather.r</code></strong>: Collects summary files from all models for the Shiny application, standardizing outputs for cross-model comparison.</p></li>
<li><p><strong><code>00-shiny-viewer.r</code></strong>: Script to launch the Shiny app for interactive model exploration, allowing users to dynamically filter and compare results across all model configurations.</p></li>
</ul>
</section>
</section>
<section id="helper-functions" class="level1">
<h1>Helper Functions</h1>
<p>The project includes numerous utility functions in the <code>code/helper-fns/</code> directory that support the main workflow:</p>
<section id="model-management" class="level2">
<h2 class="anchored" data-anchor-id="model-management">Model Management</h2>
<ul>
<li><strong><code>clean_dir.r</code></strong>: Cleans unnecessary files from model directories to save disk space, keeping only essential files needed for analysis.</li>
<li><strong><code>is_linux_os.r</code></strong>: Detects the operating system to ensure compatibility with the appropriate Stock Synthesis executable.</li>
<li><strong><code>make_ss_output.r</code></strong>: Generates Stock Synthesis output files in a controlled environment, facilitating consistent results across different systems.</li>
<li><strong><code>ss_transfer.r</code></strong>: Transfers model files between directories with appropriate executable selection based on the operating system.</li>
</ul>
</section>
<section id="data-processing" class="level2">
<h2 class="anchored" data-anchor-id="data-processing">Data Processing</h2>
<ul>
<li><strong><code>parse-frq.r</code></strong>: Parses MFCL frequency (<code>.frq</code>) files into a simplified S4 class object, extracting catch, effort, penalty, length frequency, and weight frequency data.</li>
<li><strong><code>make-selex-par.r</code></strong>: Contains helper functions to define different selectivity parameter configurations, including:
<ul>
<li><code>make_size_selex_par_24</code>: For double-normal selectivity</li>
<li><code>make_size_selex_par_5</code>: For mirrored selectivity</li>
<li><code>make_size_selex_par_1</code>: For logistic selectivity</li>
<li><code>make_age_selex_par_11</code>: For non-parametric age-based selectivity</li>
</ul></li>
</ul>
</section>
<section id="reporting-and-visualization" class="level2">
<h2 class="anchored" data-anchor-id="reporting-and-visualization">Reporting and Visualization</h2>
<ul>
<li><strong><code>ss_model_html_viewer.r</code></strong>: Generates an HTML dashboard for interactive model exploration, creating a comprehensive visual representation of model outputs.</li>
<li><strong><code>summarize_ss_model.r</code></strong>: Extracts key model parameters, diagnostics, and estimates into standardized CSV files for easier analysis and comparison.</li>
<li><strong><code>summarize_fleets.r</code></strong>: Summarizes fleet structure, selectivity, and data components for each fishery in the model.</li>
<li><strong><code>report-helpers.r</code></strong>: Contains specialized functions for data extraction and visualization:
<ul>
<li><code>extract_mfcl_quantities</code>: Extracts population metrics from MFCL models</li>
<li><code>get_population_numbers</code>: Extracts numbers-at-age from Stock Synthesis models</li>
<li><code>plot_model_comparison_ts</code>: Creates time series comparison plots across models</li>
<li><code>plot_model_comparison_selex</code>: Visualizes selectivity patterns across models</li>
<li><code>plot_index_comparison</code>: Compares fits to abundance indices</li>
<li><code>plot_composition_comparison</code>: Displays fits to length and weight composition data</li>
<li><code>plot_catch_comparison</code>: Shows catch fits across models</li>
<li><code>plot_model_comparison_bio</code>: Compares biological parameters like growth and maturity</li>
</ul></li>
</ul>
</section>
</section>
<section id="usage-examples" class="level1">
<h1>Usage Examples</h1>
<p>Here are some common usage examples for working with the repository:</p>
<section id="generating-html-dashboard-for-a-model" class="level2">
<h2 class="anchored" data-anchor-id="generating-html-dashboard-for-a-model">Generating HTML Dashboard for a Model</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create HTML dashboard for model "12-CAAL-old-growth-SD"</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>model_dir <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"models"</span>, <span class="st">"stock-synthesis"</span>, <span class="st">"12-CAAL-old-growth-SD"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"code/00-html-viewer.r"</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ss_model_html_viewer</span>(model_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="comparing-models-with-time-series-plots" class="level2">
<h2 class="anchored" data-anchor-id="comparing-models-with-time-series-plots">Comparing Models with Time Series Plots</h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare depletion time series across multiple models</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"code/00-report-plots.r"</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_model_comparison_ts</span>(</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">model_ids =</span> <span class="fu">c</span>(<span class="st">"07-catch-uncertainty"</span>, <span class="st">"12-CAAL-old-growth-SD"</span>),</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">model_stem =</span> <span class="fu">file.path</span>(<span class="st">"models"</span>, <span class="st">"stock-synthesis"</span>),</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">categories =</span> <span class="fu">c</span>(<span class="st">"Depletion (D)"</span>),</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">show_se =</span> <span class="cn">TRUE</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">save_plot =</span> <span class="cn">TRUE</span>,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">save_dir =</span> <span class="fu">file.path</span>(<span class="st">"assets"</span>, <span class="st">"static"</span>),</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">plot_name =</span> <span class="st">"depletion_comparison"</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="using-the-interactive-shiny-app" class="level2">
<h2 class="anchored" data-anchor-id="using-the-interactive-shiny-app">Using the Interactive Shiny App</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First gather model summary data</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Note that this step is only needed if you have added new models to the repository</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"code/00-shiny-gather.r"</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Then launch the Shiny app</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"code/00-shiny-viewer.r"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="creating-a-new-model-from-an-existing-one" class="level2">
<h2 class="anchored" data-anchor-id="creating-a-new-model-from-an-existing-one">Creating a New Model from an Existing One</h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transfer base model to a new directory and make modifications</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>from_dir <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"models"</span>, <span class="st">"stock-synthesis"</span>, <span class="st">"12-CAAL-old-growth-SD"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>to_dir <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"models"</span>, <span class="st">"stock-synthesis"</span>, <span class="st">"my-new-model"</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"code/helper-fns/ss_transfer.r"</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ss_transfer</span>(from_dir, to_dir, <span class="fu">file.path</span>(<span class="st">"executables"</span>, <span class="st">"stock-synthesis"</span>))</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Make modifications to data or control files</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co"># ...</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the model</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="fu">run</span>(<span class="at">dir =</span> to_dir, <span class="at">exe =</span> <span class="st">"ss3.exe"</span>)</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize the results</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"code/helper-fns/summarize_ss_model.r"</span>)</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize_ss_model</span>(to_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="license" class="level1">
<h1>License</h1>
<p>The code contained in this repository is licensed under the GNU GENERAL PUBLIC LICENSE version 3 (<a href="https://www.gnu.org/licenses/gpl-3.0.html">GPLv3</a>).</p>
</section>
<section id="disclaimer" class="level1">
<h1>Disclaimer</h1>
<p>This repository is a scientific product and is not official communication of the National Oceanic and Atmospheric Administration, or the United States Department of Commerce. All NOAA GitHub project code is provided on an ‘as is’ basis and the user assumes responsibility for its use. Any claims against the Department of Commerce or Department of Commerce bureaus stemming from the use of this GitHub project will be governed by all applicable Federal law. Any reference to specific commercial products, processes, or services by service mark, trademark, manufacturer, or otherwise, does not constitute or imply their endorsement, recommendation or favoring by the Department of Commerce. The Department of Commerce seal and logo, or the seal and logo of a DOC bureau, shall not be used in any manner to imply endorsement of any commercial product or activity by DOC or the United States Government.</p>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/N-DucharmeBarth-NOAA\.github\.io\/2025-swpo-mls-meeting");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/N-DucharmeBarth-NOAA/2025-swpo-mls-meeting/blob/main/assets/instructions.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/N-DucharmeBarth-NOAA/2025-swpo-mls-meeting/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>